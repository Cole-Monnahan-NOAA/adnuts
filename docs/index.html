<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>No-U-Turn MCMC Sampling for ADMB Models • adnuts</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="No-U-Turn MCMC Sampling for ADMB Models">
<meta property="og:description" content="Bayesian inference using the no-U-turn (NUTS) algorithm by 
 Hoffman and Gelman (2014) &lt;https://www.jmlr.org/papers/v15/hoffman14a.html&gt;. 
 Designed for AD Model Builder (ADMB) models,
 or when R functions for log-density and log-density gradient
 are available, such as Template Model Builder
 models and other special cases. Functionality is similar to Stan, 
 and the rstan and shinystan packages are used for diagnostics and 
 inference.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">adnuts</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/adnuts.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Cole-Monnahan-NOAA/adnuts/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="adnuts" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#adnuts" class="anchor"></a>adnuts</h1></div>
<p>main: <a href="https://github.com/Cole-Monnahan-NOAA/adnuts/actions?query=workflow%3AR-CMD-check"><img src="https://github.com/Cole-Monnahan-NOAA/adnuts/workflows/R-CMD-check/badge.svg?branch=main" alt="R-CMD-check"></a> dev: <a href="https://github.com/Cole-Monnahan-NOAA/adnuts/actions?query=workflow%3AR-CMD-check"><img src="https://github.com/Cole-Monnahan-NOAA/adnuts/workflows/R-CMD-check/badge.svg?branch=dev" alt="R-CMD-check"></a> <a href="https://codecov.io/gh/Cole-Monnahan-NOAA/adnuts"><img src="https://codecov.io/gh/Cole-Monnahan-NOAA/adnuts/branch/dev/graph/badge.svg" alt="codecov"></a> <a href="https://www.r-pkg.org/pkg/adnuts"><img src="https://www.r-pkg.org/badges/version/adnuts"></a> <a href="https://www.r-pkg.org/pkg/adnuts"><img src="https://cranlogs.r-pkg.org/badges/adnuts" alt="CRAN RStudio mirror downloads"></a></p>
<p>The aim of ‘adnuts’ (pronounced A-D NUTS like A-D MB) is to provide advanced MCMC sampling for ‘ADMB’ and ‘TMB’ models. It mimics ‘Stan’ in functionality and feel, specifically providing no-U-turn (NUTS) sampling with adaptive mass matrix and parallel execution.</p>
<p>The R package ‘tmbstan’ (available on CRAN) has largely replaced the TMB capabilities since original development. As such, adnuts is primarily used for ADMB models. See the following paper for an introduction to the package capabilities, and contrast with tmbstan:</p>
<p>Monnahan CC, Kristensen K (2018) No-U-turn sampling for fast Bayesian inference in ADMB and TMB: Introducing the adnuts and tmbstan R packages. PLoS ONE 13(5):e0197954. <a href="https://doi.org/10.1371/journal.pone.0197954" class="uri">https://doi.org/10.1371/journal.pone.0197954</a></p>
<p>‘adnuts’ was designed specifically for use in fisheries stock assessments, and interested authors are referred to:</p>
<p>Monnahan, C.C., T.A. Branch, J.T. Thorson, I.J. Stewart, C.S. Szuwalksi</p>
<p>(2020) Overcoming long Bayesian run times in integrated fisheries stock assessments. ICES Journal of Marine Science. <a href="https://dx.doi.org/10.1093/icesjms/fsz059" class="uri">https://dx.doi.org/10.1093/icesjms/fsz059</a></p>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The ‘sample_rwm’ and ‘sample_nuts’ functions draw posterior samples from an ADMB model using an MCMC algorithm (random walk Metropolis or no-U-turn sampler). The returned fitted object contains samples and other information. The function ‘extract_samples’ can be used to get posterior samples (post warmup and thinning) into a data frame for inference, while ‘launch_shinyadmb’ can be used for interactive diagnostics based on ‘ShinyStan’.</p>
<p>A brief <a href="https://github.com/Cole-Monnahan-NOAA/adnuts/blob/master/inst/demo.R">demonstration file</a> is the best place to help get you started, and there is also a user guide: <code><a href="articles/adnuts.html">vignette('adnuts')</a></code> for more detailed information.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To use the ADMB functionality you need to build your model with version 12.0 (released December 2017) or later, otherwise this functionality is not available. See <a href="https://www.admb-project.org/docs/install/">the ADMB installation instructions</a> for more information. ADMB 12.2 is highly recommended because it provides better console output, fixes bugs, and adds improved adaptation capabilities as compared to 12.0. You can check the ADMB version of a compiled model from the command line with a command <code>model.exe -version</code> which prints the version among other things.</p>
<p>The adnuts R package version 1.1.2 can be installed from CRAN: <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages('adnuts')</a></code>. Future minor releases <a href="https://github.com/Cole-Monnahan-NOAA/adnuts/releases">listed here</a> may not be released on CRAN so the latest stable version can be installed as:</p>
<p><code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">devtools::install_github('Cole-Monnahan-NOAA/adnuts')</a></code></p>
<p>The development version can be installed as: <code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">devtools::install_github('Cole-Monnahan-NOAA/adnuts', ref='dev')</a></code></p>
</div>
<div id="known-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#known-issues" class="anchor"></a>Known issues</h2>
<p>Windows users may experience issues if their model name is too long. In some cases the OS will rename the output files using a “short” version. You’ll see files like “MODEL~1.par”. The package tries to handle this but it is <strong>highly recommended</strong> to simply shorten your filename. So instead of ‘model_filename_2021.tpl’ use e.g. ‘model_21’.</p>
<p>Analyses are reproducible by setting the same initial values and a seed in <code>sample_rwm</code> or <code>sample_nuts</code> (passed to ADMB as ‘-mcseed’). However, they may not be entirely consistent across OS platforms. The chains will start the same but may eventually diverge. This is likely due to minuscule differences in the gradient and log-posterior calculations between systems and compilers.</p>
</div>
<div id="disclaimer" class="section level2">
<h2 class="hasAnchor">
<a href="#disclaimer" class="anchor"></a>Disclaimer</h2>
<p>“The United States Department of Commerce (DOC) GitHub project code is provided on an ‘as is’ basis and the user assumes responsibility for its use. DOC has relinquished control of the information and no longer has responsibility to protect the integrity, confidentiality, or availability of the information. Any claims against the Department of Commerce stemming from the use of its GitHub project will be governed by all applicable Federal law. Any reference to specific commercial products, processes, or services by service mark, trademark, manufacturer, or otherwise, does not constitute or imply their endorsement, recommendation or favoring by the Department of Commerce. The Department of Commerce seal and logo, or the seal and logo of a DOC bureau, shall not be used in any manner to imply endorsement of any commercial product or activity by DOC or the United States Government.”</p>
<p><img src="https://raw.githubusercontent.com/nmfs-general-modeling-tools/nmfspalette/main/man/figures/noaa-fisheries-rgb-2line-horizontal-small.png" height="75" alt="NOAA Fisheries"></p>
<p><a href="https://www.commerce.gov/">U.S. Department of Commerce</a> | <a href="https://www.noaa.gov">National Oceanographic and Atmospheric Administration</a> | <a href="https://www.fisheries.noaa.gov/">NOAA Fisheries</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=adnuts">https://​cloud.r-project.org/​package=adnuts</a>
</li>
<li>Browse source code at <br><a href="https://github.com/Cole-Monnahan-NOAA/adnuts/">https://​github.com/​Cole-Monnahan-NOAA/​adnuts/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/Cole-Monnahan-NOAA/adnuts/issues">https://​github.com/​Cole-Monnahan-NOAA/​adnuts/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing adnuts</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Cole Monnahan <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-0871-6700" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Cole Monnahan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
