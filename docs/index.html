<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sparse No-U-Turn MCMC Sampling for Template Model Builder • adnuts</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Sparse No-U-Turn MCMC Sampling for Template Model Builder">
<meta name="description" content="Bayesian inference powered by the sparse no-U-turn (SNUTS) algorithm by Monnahan et al. (in prep). SNUTS is implemented for Template Model Builder (TMB) models via the StanEstimators interface, which improves sampling efficiency by decorrelating the posterior via a sparse metric prior to sampling. AD Model Builder (ADMB) models are also supported and have functionality is similar to Stan. The rstan and shinystan packages are used for diagnostics and inference.">
<meta property="og:description" content="Bayesian inference powered by the sparse no-U-turn (SNUTS) algorithm by Monnahan et al. (in prep). SNUTS is implemented for Template Model Builder (TMB) models via the StanEstimators interface, which improves sampling efficiency by decorrelating the posterior via a sparse metric prior to sampling. AD Model Builder (ADMB) models are also supported and have functionality is similar to Stan. The rstan and shinystan packages are used for diagnostics and inference.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">adnuts</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/adnuts.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/NUTS-for-ADMB-models.html">NUTS for ADMB models</a></li>
    <li><a class="dropdown-item" href="articles/SNUTS-for-TMB-models.html">Sparse NUTS for TMB models</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cole-Monnahan-NOAA/adnuts/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="adnuts">adnuts<a class="anchor" aria-label="anchor" href="#adnuts"></a>
</h1></div>
<p>main: <a href="https://github.com/Cole-Monnahan-NOAA/adnuts/actions?query=workflow%3AR-CMD-check" class="external-link"><img src="https://github.com/Cole-Monnahan-NOAA/adnuts/workflows/R-CMD-check/badge.svg?branch=main" alt="R-CMD-check"></a> dev: <a href="https://github.com/Cole-Monnahan-NOAA/adnuts/actions?query=workflow%3AR-CMD-check" class="external-link"><img src="https://github.com/Cole-Monnahan-NOAA/adnuts/workflows/R-CMD-check/badge.svg?branch=dev" alt="R-CMD-check"></a> <a href="https://codecov.io/gh/Cole-Monnahan-NOAA/adnuts" class="external-link"><img src="https://codecov.io/gh/Cole-Monnahan-NOAA/adnuts/branch/dev/graph/badge.svg" alt="codecov"></a> <a href="https://www.r-pkg.org/pkg/adnuts" class="external-link"><img src="https://www.r-pkg.org/badges/version/adnuts"></a> <a href="https://www.r-pkg.org/pkg/adnuts" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/adnuts" alt="CRAN RStudio mirror downloads"></a></p>
<p>The aim of ‘adnuts’ (pronounced A-D nuts) is to provide advanced MCMC sampling for ‘TMB’ and ‘ADMB’ models. For TMB models it uses the sparse NUTS (SNUTS; Monnahan et al. in prep) algorithm to decorrelate the posterior using the joint precision matrix. The R package ‘tmbstan’ (available on CRAN) provides an alternative for TMB which more closely links to Stan. Until the development of SNUTS, ‘adnuts’ was primarily used for ADMB models. For the foreseeable future SNUTS via ‘adnuts’ is likely to be the best general option for TMB users.</p>
<p>For ADMB it mimics ‘Stan’ in functionality and feel, specifically providing no-U-turn (NUTS) sampling with adaptive mass matrix and parallel execution. Development of ADMB features is winding down, but functionality expected to be maintained in the coming years.</p>
<p>See the following papers for an introduction to the package capabilities, and contrast with tmbstan:</p>
<p>Monnahan CC, Kristensen K (2018) No-U-turn sampling for fast Bayesian inference in ADMB and TMB: Introducing the adnuts and tmbstan R packages. PLoS ONE 13(5):e0197954. <a href="https://doi.org/10.1371/journal.pone.0197954" class="external-link uri">https://doi.org/10.1371/journal.pone.0197954</a></p>
<p>Monnahan CC, Thorson, J.T., Kristensen, K, and Carpenter, B (in prep). Leveraging sparsity to improve no-u-turn sampling efficiency of hierarchical Bayesian models.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To use SNUTS with TMB first install the <a href="https://github.com/andrjohns/StanEstimators" class="external-link">StanEstimators</a> package which is not on CRAN but can be installed as:</p>
<pre><code><span><span class="co"># we recommend running this is a fresh R session or restarting your current session</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'StanEstimators'</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'&lt;https://andrjohns.r-universe.dev&gt;'</span>, <span class="st">'&lt;https://cloud.r-project.org&gt;'</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>Then install the GitHub version of ‘adnuts’:</p>
<pre><code><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'Cole-Monnahan-NOAA/adnuts'</span><span class="op">)</span></span></code></pre>
<p>A quick test of functionality is:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Cole-Monnahan-NOAA.github.io/adnuts">adnuts</a></span><span class="op">)</span></span>
<span><span class="fu">TMB</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/TMB/man/runExample.html" class="external-link">runExample</a></span><span class="op">(</span><span class="st">'simple'</span><span class="op">)</span></span>
<span><span class="va">mcmc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sample_snuts.html">sample_snuts</a></span><span class="op">(</span><span class="va">obj</span>, num_samples<span class="op">=</span><span class="fl">500</span><span class="op">)</span></span></code></pre>
<p>A brief <a href="https://github.com/Cole-Monnahan-NOAA/adnuts/blob/dev/inst/demo_SNUTS.R" class="external-link">demonstration file</a> is the best place to help get you started, and there is also a user guide: see <code><a href="articles/adnuts.html">vignette('adnuts')</a></code> for the basics and this <a href="https://cole-monnahan-noaa.github.io/adnuts/docs/articles/SNUTS-for-TMB-models.html" class="external-link">online article</a> for more detailed information.</p>
</div>
<div class="section level2">
<h2 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p>“The United States Department of Commerce (DOC) GitHub project code is provided on an ‘as is’ basis and the user assumes responsibility for its use. DOC has relinquished control of the information and no longer has responsibility to protect the integrity, confidentiality, or availability of the information. Any claims against the Department of Commerce stemming from the use of its GitHub project will be governed by all applicable Federal law. Any reference to specific commercial products, processes, or services by service mark, trademark, manufacturer, or otherwise, does not constitute or imply their endorsement, recommendation or favoring by the Department of Commerce. The Department of Commerce seal and logo, or the seal and logo of a DOC bureau, shall not be used in any manner to imply endorsement of any commercial product or activity by DOC or the United States Government.”</p>
<p><img src="https://raw.githubusercontent.com/nmfs-general-modeling-tools/nmfspalette/main/man/figures/noaa-fisheries-rgb-2line-horizontal-small.png" alt="NOAA Fisheries" height="75"></p>
<p><a href="https://www.commerce.gov/" class="external-link">U.S. Department of Commerce</a> | <a href="https://www.noaa.gov" class="external-link">National Oceanographic and Atmospheric Administration</a> | <a href="https://www.fisheries.noaa.gov/" class="external-link">NOAA Fisheries</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=adnuts" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/Cole-Monnahan-NOAA/adnuts/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Cole-Monnahan-NOAA/adnuts/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing adnuts</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Cole Monnahan <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-0871-6700" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cole Monnahan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
